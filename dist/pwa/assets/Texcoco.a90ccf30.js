import{Q as A,a as r}from"./QTd.4498f859.js";import{r as n,c as D,o as N,b as T,w as l,u as U,f as k,d as a,aE as m,t as _,h as f,e as B}from"./index.a13ff6e6.js";import{a as R,u as I,Q as $,b,x as q}from"./QPage.d9ae1c29.js";import{R as w,a as E,b as v,Q as L,c as j}from"./QCardActions.48ef1265.js";import"./axios.728dd142.js";import"./rtl.b3ca904d.js";const H=k("div",{class:"text-bold"},"Notas",-1),W={__name:"Texcoco",setup(J){const i=I();U();const d=n([]),y=n({opts:["Mochila","Juguete","Papeleria","Paraguas","Accesorios","Calculadora","Peluche","Transporte","Electronicos","Navidad","Sin categor\xEDa","Hogar","Sistema","Detalles"]}),c=n(!1),u=n(!1);n("");const p=n(null),Q=n({cols:[{name:"id",label:"ID",align:"center"},{name:"alias",label:"ALIAS",align:"center"},{name:"name",label:"SUCURSAL",align:"left"},{name:"actions",label:"Actions",align:"left"}]}),o=n({cats:[],_workpoint_from:null,_workpoint_to:null,_type:2,notes:null}),V=D(()=>o.value.cats.length>0&&o.value._workpoint_to),C=async()=>{i.loading.show({message:"Obteniendo Sucursales"});const s=await w.cedis();s.status==200?(console.log(s.data),d.value=s.data,i.loading.hide()):alert("Problemas con la obtencion de datos")},P=s=>{u.value=!0,p.value=s},S=async s=>{c.value=!0,i.loading.show({message:"Creando Pedido"});let t={cats:o.value.cats.map(g=>"'"+g+"'").join(),_workpoint_from:p.value,_workpoint_to:o.value._workpoint_to.id,_type:2,notes:o.value.notes};console.log(t);const e=await w.createAutomate(t);e.status==200?(console.log(e.data),c.value=!1,i.loading.hide(),i.notify({type:"positive",message:`Pedido ${e.data.order.id} creado`,position:"center"}),o.value={cats:[],_workpoint_from:null,_workpoint_to:null,_type:2,notes:null},u.value=!1):alert("Nosegeneroelpedido")},x=s=>s.id==p.value,h=()=>{o.value={cats:[],_workpoint_from:null,_workpoint_to:null,_type:2,notes:null},u.value=!1};return C(),(s,t)=>(N(),T(R,{padding:""},{default:l(()=>[k("div",null,[a($,{title:"Sucursales",rows:d.value,"row-key":"id",columns:Q.value.cols,pagination:{rowsPerPage:20}},{body:l(e=>[a(A,{props:e},{default:l(()=>[a(r,{key:"id",props:e},{default:l(()=>[m(_(e.row.id),1)]),_:2},1032,["props"]),a(r,{key:"alias",props:e},{default:l(()=>[m(_(e.row.alias),1)]),_:2},1032,["props"]),a(r,{key:"name",props:e},{default:l(()=>[m(_(e.row.name),1)]),_:2},1032,["props"]),a(r,{key:"actions",props:e},{default:l(()=>[a(f,{flat:"",rounded:"","icon-right":"arrow_circle_right",label:"Crear Pedido",color:"primary",onClick:g=>P(e.row.id),disable:c.value},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),a(q,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),persistent:""},{default:l(()=>[a(E,{style:{"min-width":"350px"}},{default:l(()=>[a(v,null,{default:l(()=>[a(b,{modelValue:o.value.cats,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.cats=e),options:y.value.opts,label:"Seccion",filled:"",multiple:"","use-chips":""},null,8,["modelValue","options"])]),_:1}),a(v,null,{default:l(()=>[a(b,{modelValue:o.value._workpoint_to,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value._workpoint_to=e),options:d.value,label:"Destino","option-label":"name",filled:"","option-disable":e=>x(e)},null,8,["modelValue","options","option-disable"])]),_:1}),a(v,{class:"q-pt-none"},{default:l(()=>[H,a(L,{dense:"",modelValue:o.value.notes,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value.notes=e),autofocus:""},null,8,["modelValue"])]),_:1}),a(j,{align:"right",class:"text-primary"},{default:l(()=>[a(f,{flat:"",label:"Cancel",onClick:h}),a(f,{flat:"",label:"Continuar",onClick:S,disable:!B(V)},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}};export{W as default};
