import{Q,a as d}from"./QTd.eab1ca34.js";import{r as s,o as h,b as A,w as o,u as P,f as w,d as a,aE as m,t as p,h as f,e as V,aA as x}from"./index.7e3dde04.js";import{a as S,u as N,Q as B,x as D}from"./QPage.2d1f42a4.js";import{a as R,b as g,Q as T,c as U}from"./QCardActions.6c177c96.js";import{C as I}from"./ClosePopup.472f98eb.js";import"./axios.10c2b4ae.js";import{R as v}from"./RestockApi.f0c7f0de.js";import"./rtl.c2b0dab7.js";const $=w("div",{class:"text-h6"},"Notas",-1),K={__name:"Automate",setup(q){const n=N();P();const _=s([]),u=s(!1),r=s(!1),i=s(""),c=s(null);let b=s({cols:[{name:"id",label:"ID",align:"center"},{name:"alias",label:"ALIAS",align:"center"},{name:"name",label:"SUCURSAL",align:"left"},{name:"actions",label:"Actions",align:"left"}]});const y=async()=>{n.loading.show({message:"Obteniendo Sucursales"});const l=await v.suc();l.status==200?(console.log(l.data),_.value=l.data,n.loading.hide()):alert("Problemas con la obtencion de datos")},k=l=>{r.value=!0,c.value=l},C=async l=>{u.value=!0,n.loading.show({message:"Creando Pedido"});let t={_workpoint_from:c.value,_workpoint_to:1,_type:2,notes:i.value};const e=await v.createAutomate(t);e.status==200?(console.log(e.data),u.value=!1,n.loading.hide(),n.notify({type:"positive",message:`Pedido ${e.data.order.id} creado`,position:"center"}),i.value="",c.value=null,r.value=!1):alert("Nosegeneroelpedido")};return y(),(l,t)=>(h(),A(S,{padding:""},{default:o(()=>[w("div",null,[a(B,{title:"Sucursales",rows:_.value,"row-key":"id",columns:V(b).cols,pagination:{rowsPerPage:20}},{body:o(e=>[a(Q,{props:e},{default:o(()=>[a(d,{key:"id",props:e},{default:o(()=>[m(p(e.row.id),1)]),_:2},1032,["props"]),a(d,{key:"alias",props:e},{default:o(()=>[m(p(e.row.alias),1)]),_:2},1032,["props"]),a(d,{key:"name",props:e},{default:o(()=>[m(p(e.row.name),1)]),_:2},1032,["props"]),a(d,{key:"actions",props:e},{default:o(()=>[a(f,{flat:"",rounded:"","icon-right":"arrow_circle_right",label:"Crear Pedido",color:"primary",onClick:L=>k(e.row.id),disable:u.value},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),a(D,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),persistent:""},{default:o(()=>[a(R,{style:{"min-width":"350px"}},{default:o(()=>[a(g,null,{default:o(()=>[$]),_:1}),a(g,{class:"q-pt-none"},{default:o(()=>[a(T,{dense:"",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),autofocus:""},null,8,["modelValue"])]),_:1}),a(U,{align:"right",class:"text-primary"},{default:o(()=>[x(a(f,{flat:"",label:"Cancel"},null,512),[[I]]),a(f,{flat:"",label:"Continuar",onClick:C})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}};export{K as default};
