import{u as Q,a as Y,r as n,c as v,o as b,b as h,w as s,d as t,e as x,f as d,t as M,Q as R,g as B,h as S,i as L}from"./index.a3f9d610.js";import{Q as P,a as q,b as I,c as O,u as z,R as N,d as U,e as H,f as T,g as j}from"./ClosePopup.c6926d99.js";import{d as m}from"./dayjs.min.53a5c0af.js";import{u as D}from"./Restock.c2c6642d.js";import"./axios.2cb04522.js";const A={class:"full-width row items-center"},E={class:"col text-h6 text-dark"},F={__name:"OrdersSupply",setup(V){Q();const u=Y(),c=D(),o=n({columns:[{name:"id",label:"Folio",field:"id",align:"center"},{name:"state",label:"Estado",field:e=>e.log.length==1?e.log[0].name:e.log[e.log.length-1].name,align:"left",sortable:!0,classes:e=>e._status==3?"text-positive text-bold":""},{name:"laststate",label:"Ultima actividad",field:e=>m(e.log.find(a=>a.id==e.status.id).pivot.updated_at).format("YYYY-MM-DD hh:mm A"),align:"left"},{name:"from",label:"Sucursal",field:e=>e.from.name.toUpperCase(),align:"left",sortable:!0},{name:"models",label:"Modelos",field:"products_count",align:"center"},{name:"notes",label:"Notas",field:e=>e.notes,align:"left"},{name:"invoice",label:"Salida",field:e=>{var a;return(a=e.invoice)!=null?a:"--"},align:"center"}],filter:"",pagination:{sortBy:"desc",descending:!1,rowsPerPage:20}}),p=(e,a,l)=>u.push(`/supply/${a.id}`),_=v(()=>c.ordersSize),i=v(()=>c.ordersdb);return(e,a)=>(b(),h(I,{padding:""},{default:s(()=>[t(P,{flat:"","row-key":"id",rows:x(i),columns:o.value.columns,filter:o.value.filter,pagination:o.value.pagination,onRowClick:p},{top:s(()=>[d("div",A,[d("div",E,"Pedidos: "+M(x(_)),1),t(q,{dense:"",modelValue:o.value.filter,"onUpdate:modelValue":a[0]||(a[0]=l=>o.value.filter=l),"input-class":"text-uppercase",placeholder:"Buscar",color:"pink-5"},{append:s(()=>[t(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},8,["rows","columns","filter","pagination"])]),_:1}))}};const G=d("div",{class:"text-bold"},"Resurtido ",-1),J={class:"row"},K={class:"col row"},te={__name:"SupplyLyt",setup(V){const u=Q(),c=Y(),o=D(),p=z(),_=n([{id:0,alias:"Todas"},{id:1,alias:"CEDIS",_state:1},{id:2,alias:"SP1",_state:1}]),i=n([{id:"day",label:"Hoy"},{id:"week",label:"Semana"},{id:"month",label:"Mes"},{id:"C",label:"otra ...",disable:!0}]),e=n(null),a=n(null),l=n({from:m(Date.now()).startOf("day"),to:m(Date.now()).startOf("day")}),g=async()=>{var k;p.loading.show({message:"Cargado vista..."}),console.log("%cIniciando MainLayout...","font-size:2em;color:orange;");let f=(k=u.query.v)!=null?k:"day",r=i.value.findIndex(C=>C.id==f),y=r>=0?r:0;a.value=i.value[y],l.value.from=m(Date.now()).startOf(a.value.id);const w=await N.index(a.value.id);console.log(w),o.fillOrders(w.orders),e.value=_.value[0],console.log("%cMainLayout listo!!","font-size:2em;color:orange;"),p.loading.hide()},$=f=>c.push(`/supply?v=${f.id}`);return v(()=>l.value.from.format("YYYY/MM/DD")),v(()=>l.value.to.format("YYYY/MM/DD")),B(()=>u.query,()=>{g()}),g(),document.title="Resurtido",(f,r)=>(b(),h(O,{view:"lHh Lpr lFf"},{default:s(()=>[t(T,{bordered:"",class:"transparent text-dark"},{default:s(()=>[t(U,{class:"row justify-between items-center"},{default:s(()=>[G,d("div",J,[t(S,{color:"pink-5",round:"",unelevated:"",flat:"",icon:"sync",onClick:g}),d("div",K,[t(H,{class:"col",dense:"",filled:"",label:"Vista",modelValue:a.value,"onUpdate:modelValue":[r[0]||(r[0]=y=>a.value=y),$],options:i.value},null,8,["modelValue","options"]),a.value.id=="C"?(b(),h(S,{key:0,unelevated:"",color:"pink-5",icon:"fas fa-calendar-day",dense:""})):L("",!0)])])]),_:1})]),_:1}),t(j,null,{default:s(()=>[t(F)]),_:1})]),_:1}))}};export{te as default};
