import{F as S,c as v,B as p,E as R,r as w,y as k,z as A,j as E,m as H,$ as _,v as P,x as $,ag as I,n as O,ae as Q,A as T,g as y,k as j,ad as L,l as D,af as K}from"./index.eca9d018.js";import{C as M,k as N}from"./QCard.a3c9784d.js";var J=S({name:"QToolbarTitle",props:{shrink:Boolean},setup(n,{slots:b}){const d=v(()=>"q-toolbar__title ellipsis"+(n.shrink===!0?" col-shrink":""));return()=>p("div",{class:d.value},R(b.default))}}),W=S({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validation-success","validation-error"],setup(n,{slots:b,emit:d}){const g=H(),t=w(null);let l=0;const r=[];function x(o){const c=typeof o=="boolean"?o:n.noErrorFocus!==!0,u=++l,f=(a,i)=>{d("validation-"+(a===!0?"success":"error"),i)},q=a=>{const i=a.validate();return typeof i.then=="function"?i.then(e=>({valid:e,comp:a}),e=>({valid:!1,comp:a,err:e})):Promise.resolve({valid:i,comp:a})};return(n.greedy===!0?Promise.all(r.map(q)).then(a=>a.filter(i=>i.valid!==!0)):r.reduce((a,i)=>a.then(()=>q(i).then(e=>{if(e.valid===!1)return Promise.reject(e)})),Promise.resolve()).catch(a=>[a])).then(a=>{if(a===void 0||a.length===0)return u===l&&f(!0),!0;if(u===l){const{comp:i,err:e}=a[0];if(e!==void 0&&console.error(e),f(!1,i),c===!0){const s=a.find(({comp:B})=>typeof B.focus=="function"&&_(B.$)===!1);s!==void 0&&s.comp.focus()}}return!1})}function m(){l++,r.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function F(o){o!==void 0&&P(o);const c=l+1;x().then(u=>{c===l&&u===!0&&(n.onSubmit!==void 0?d("submit",o):o!==void 0&&o.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function V(o){o!==void 0&&P(o),d("reset"),$(()=>{m(),n.autofocus===!0&&n.noResetFocus!==!0&&h()})}function h(){M(()=>{if(t.value===null)return;const o=t.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(t.value.querySelectorAll("[tabindex]"),c=>c.tabIndex>-1);o!=null&&o.focus({preventScroll:!0})})}I(O,{bindComponent(o){r.push(o)},unbindComponent(o){const c=r.indexOf(o);c>-1&&r.splice(c,1)}});let C=!1;return k(()=>{C=!0}),A(()=>{C===!0&&n.autofocus===!0&&h()}),E(()=>{n.autofocus===!0&&h()}),Object.assign(g.proxy,{validate:x,resetValidation:m,submit:F,reset:V,focus:h,getValidationComponents:()=>r}),()=>p("form",{class:"q-form",ref:t,onSubmit:F,onReset:V},R(b.default))}}),X=S({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(n,{slots:b,emit:d}){const{proxy:{$q:g}}=H(),t=D(K,Q);if(t===Q)return console.error("QFooter needs to be child of QLayout"),Q;const l=w(parseInt(n.heightHint,10)),r=w(!0),x=w(T.value===!0||t.isContainer.value===!0?0:window.innerHeight),m=v(()=>n.reveal===!0||t.view.value.indexOf("F")>-1||g.platform.is.ios&&t.isContainer.value===!0),F=v(()=>t.isContainer.value===!0?t.containerHeight.value:x.value),V=v(()=>{if(n.modelValue!==!0)return 0;if(m.value===!0)return r.value===!0?l.value:0;const e=t.scroll.value.position+F.value+l.value-t.height.value;return e>0?e:0}),h=v(()=>n.modelValue!==!0||m.value===!0&&r.value!==!0),C=v(()=>n.modelValue===!0&&h.value===!0&&n.reveal===!0),o=v(()=>"q-footer q-layout__section--marginal "+(m.value===!0?"fixed":"absolute")+"-bottom"+(n.bordered===!0?" q-footer--bordered":"")+(h.value===!0?" q-footer--hidden":"")+(n.modelValue!==!0?" q-layout--prevent-focus"+(m.value!==!0?" hidden":""):"")),c=v(()=>{const e=t.rows.value.bottom,s={};return e[0]==="l"&&t.left.space===!0&&(s[g.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),e[2]==="r"&&t.right.space===!0&&(s[g.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),s});function u(e,s){t.update("footer",e,s)}function f(e,s){e.value!==s&&(e.value=s)}function q({height:e}){f(l,e),u("size",e)}function z(){if(n.reveal!==!0)return;const{direction:e,position:s,inflectionPoint:B}=t.scroll.value;f(r,e==="up"||s-B<100||t.height.value-F.value-s-l.value<300)}function a(e){C.value===!0&&f(r,!0),d("focusin",e)}y(()=>n.modelValue,e=>{u("space",e),f(r,!0),t.animate()}),y(V,e=>{u("offset",e)}),y(()=>n.reveal,e=>{e===!1&&f(r,n.modelValue)}),y(r,e=>{t.animate(),d("reveal",e)}),y([l,t.scroll,t.height],z),y(()=>g.screen.height,e=>{t.isContainer.value!==!0&&f(x,e)});const i={};return t.instances.footer=i,n.modelValue===!0&&u("size",l.value),u("space",n.modelValue),u("offset",V.value),j(()=>{t.instances.footer===i&&(t.instances.footer=void 0,u("size",0),u("offset",0),u("space",!1))}),()=>{const e=L(b.default,[p(N,{debounce:0,onResize:q})]);return n.elevated===!0&&e.push(p("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),p("footer",{class:o.value,style:c.value,onFocusin:a},e)}}});export{J as Q,W as a,X as b};
