import{r as v,c as q,o as u,aE as I,f as n,d as e,w as t,h as k,aG as A,i as D,e as P,au as N,b as x,aK as ge,Q as Y,t as c,aD as $,R as se,u as W,a8 as _e,aF as G,aJ as ne,x as be,a as ie,g as ye}from"./index.69389b80.js";import{u as O,q as B,e as K,y as H,z as U,A as T,x as Q,s as F,t as ae,Q as X,a as Z,B as ke,w as z,v as M,R,b as he,c as xe,d as we,f as Ce,g as Se}from"./QCard.557aed5b.js";import{d as L}from"./dayjs.min.16be2667.js";import{a as Ve,Q as $e,b as De,c as Qe,d as te,e as Ie,f as le,g as Pe,u as ee}from"./Restock.66003ab2.js";import{Q as J,C as de}from"./ClosePopup.6dea9526.js";import"./axios.05577114.js";const qe={class:"q-pa-sm bg-grey-2 text-bold row justify-between items-center",style:{"min-width":"250px"}},Ee=n("div",null,"Impresion",-1),Ue={key:0,class:"row justify-between items-center"},Re={class:"q-mt-sm q-pa-sm"},Ae={key:0,class:"q-pa-sm"},Le={class:"text--3"},je={class:"q-pa-sm text-right"},oe={__name:"PrinterSelect",emits:["selected"],setup(j,{emit:S}){const w=O(),_=Ve(),s=v(null),m=v(null),g=q(()=>_.printers),b=q(()=>s.value?s.value.printers:[]),d=()=>{w.localStorage.set("LUP",{wkp:s.value,printer:m.value}),S("selected",m.value)},y=w.localStorage.getItem("LUP");return y&&(s.value=y.wkp,m.value=y.printer),(V,h)=>(u(),I(A,null,[n("div",qe,[Ee,s.value?(u(),I("div",Ue,[e($e,{flat:""},{default:t(()=>[e(k,{flat:"",color:"positive",icon:"add",dense:""}),m.value?(u(),I(A,{key:0},[e(k,{flat:"",color:"negative",icon:"delete",dense:""}),e(k,{flat:"",color:"orange",icon:"edit",dense:""})],64)):D("",!0)]),_:1})])):D("",!0)]),e(B),n("div",Re,[e(K,{modelValue:s.value,"onUpdate:modelValue":[h[0]||(h[0]=f=>s.value=f),h[1]||(h[1]=f=>m.value=null)],options:P(g),label:"Sucursal",filled:"","option-label":"alias","option-value":"id"},null,8,["modelValue","options"])]),s.value?(u(),I("div",Ae,[e(K,{modelValue:m.value,"onUpdate:modelValue":h[2]||(h[2]=f=>m.value=f),options:P(b),label:"Impresora",filled:"","option-value":"id","option-label":"name"},{option:t(f=>[N((u(),x(H,ge({clickable:""},f.itemProps),{default:t(()=>[e(U,{class:"text-center",side:""},{default:t(()=>[e(Y,{color:"primary","text-color":"white",name:"print",size:"30px"}),n("span",Le,"ID:"+c(f.opt.id),1)]),_:2},1024),e(U,null,{default:t(()=>[e(T,null,{default:t(()=>[$(c(f.opt.name),1)]),_:2},1024),e(T,{caption:"",lines:"2"},{default:t(()=>[$(c(f.opt.ip),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)),[[se]])]),_:1},8,["modelValue","options"])])):D("",!0),n("div",je,[s.value&&m.value?(u(),x(k,{key:0,color:"primary",icon:"print",onClick:d})):D("",!0)])],64))}},Be=n("div",{class:"text-overline text-grey-7"},"Sucursal",-1),Ye={class:"text-h6"},Me={class:"q-px-lg text-center"},Oe=n("div",{class:"text-overline text-grey-7"},"Folio",-1),ze={class:"text-h6"},Ne={class:"text-right"},Te=n("div",{class:"text-overline text-grey-7"},"Agente",-1),Fe={class:"text-h6"},Ge={class:"text--1"},Ke={key:0},He=n("div",null,"Salida",-1),Je={class:"text-bold text-indigo-10"},We=n("div",null,"Entrada",-1),Xe={class:"text-bold text-orange-10"},Ze={class:"full-width row items-center"},ea={class:"col text-dark"},aa={class:"text-h6"},ta={class:"text-bold"},la={key:1,class:"text-center q-pa-lg text-h6 text-grey-7"},oa=n("canvas",{id:"qrcode"},null,-1),sa={class:"text--2"},na=n("div",{class:"q-ml-md"},[n("div",{class:"text-h6"},"Emitir salida?"),n("div",null,"La salida emitira la factura correspondiente en Factusol.")],-1),ia={__name:"OrderViewer",props:{head:{type:Object,default:{}}},emits:["loaded","loading"],setup(j,{emit:S}){const w=j,_=O();W();const s=v(w.head),m=v(!0),g=v([]),b=v("basket"),d=v(null),y=v([]),V=v(!1),h=v({state:!1}),f=v({state:!1,key:null}),C=v([]),l=v({columns:[{name:"id",label:"ID",field:"id",align:"left",coldesc:"Identificador del producto (MySQL)"},{name:"code",label:"Codigo",field:"code",align:"left",coldesc:"Codigo principal del producto"},{name:"assocs",label:"Asociados",field:a=>a.variants.length?a.variants.map(o=>o.barcode).join(", "):null,align:"left",coldesc:"Codigos relacionados al codigo principal"},{name:"bcode",label:"Codigo de Barras",field:"barcode",align:"center",coldesc:"Codigo de barras principal"},{name:"locs",label:"Ubicacion",field:a=>a.locations.length?a.locations.map(o=>o.path).join(", "):"--",align:"left",coldesc:"Ubicaciones en almacen general"},{name:"stocks",label:"Stock (pzs)",field:a=>a.stocks.reduce((o,r)=>o+r.pivot.stock,0),sortable:!0,classes:a=>a.stocks.reduce((o,r)=>o+r.pivot.stock,0)<=0?"text-red text-bold":"text-bold text-primary",align:"center",coldesc:"Stock total en almacenes GENERALES (CEDIS+PAN)"},{name:"ipack",label:"PxC",field:a=>typeof a.pivot.ipack=="number"?a.pivot.ipack:a.pieces,align:"center",coldesc:"Unidades x Embalaje"},{name:"request",label:"Solicitud",field:a=>a.pivot.amount,align:"center",coldesc:"Embalaje solicitado"},{name:"uspply",label:"Unidad",field:a=>a.units.id==3?"Cajas":"Piezas",align:"left",coldesc:"Unidad de embalaje del producto"},{name:"delivery",label:"Salida (conteo)",field:a=>a.pivot.toDelivered,align:"center",coldesc:"Embalaje surtido",sortable:!0},{name:"reqinpzs",label:"Piezas",field:a=>a.pivot._supply_by==3?(typeof a.pivot.ipack=="number"?a.pivot.ipack:a.pieces)*(typeof a.pivot.ipack=="number"?a.pivot.toDelivered:a.pivot.amount):typeof a.pivot.ipack=="number"?a.pivot.toDelivered:a.pivot.amount,align:"center",coldesc:"Unidades totales en embalaje"},{name:"checkout",label:"Checkout",field:a=>a.pivot.checkout?"OK":"---",align:"center",classes:a=>a.pivot.checkout?"text-positive text-bold":"text-red",sortable:!0,coldesc:"Revision del Administrador"},{name:"received",label:"Entrada (conteo)",field:a=>a.pivot.toReceived,align:"center",coldesc:"Embalaje recibido"},{name:"descr",label:"Descripcion",field:"description",align:"left"},{name:"section",label:"Seccion",field:"section",align:"left"},{name:"family",label:"Familia",field:"family",align:"left"},{name:"category",label:"Categoria",field:"category",align:"left"}],filter:"",pagination:{sortBy:"locs",descending:!1,rowsPerPage:20}}),i=q(()=>y.value.reduce((a,o)=>a+(o.pivot._supply_by==3?o.pivot.amount*o.pieces:o.pivot.amount),0));q(()=>d.value&&(d.value.id==2||d.value.id==6));const p=q(()=>g.value.find(a=>a.id==d.value.id).pivot),E=async()=>{S("loading"),m.value=!0;let a=await R.order(s.value.id);console.log(a.data),y.value=a.data.products,g.value=a.data.log.map(o=>(o.pivot.details=JSON.parse(o.pivot.details),o)),d.value=a.data.status,f.value.key=a.data.entry_key,m.value=!1,S("loaded")},re=async()=>{S("loading"),V.value=!0;let a=3,o={id:s.value.id,state:a};const r=await R.nextState(o);r.status==200?(V.value=!1,_.notify({message:`Surtido iniciado para el pedido  ${s.value.id}`,icon:"done",position:"center",color:"teal"}),E()):alert(`Error ${r.status}: ${r.data}`),S("loaded")},ce=async()=>{_.loading.show({message:"Generando, espera..."}),h.value.state=!1;const a=await R.genInvoice(s.value.id);console.log(a.data),a.status==200?a.data.invoice?E():alert("Error 500: Ocurrio un error inesperado :("):alert(`Error ${a.status}: ${a.data}`),_.loading.hide()},ue=async()=>{let a=`http://192.168.10.15:2200/#/checkin/${s.value.id}?key=${f.value.key}`;f.value.state=!0,be(()=>Pe.toCanvas(document.getElementById("qrcode"),a))},pe=async a=>{_.loading.show({message:"..."}),console.log(a);const o=await R.printKey({ip:a.ip,port:a._port,order:s.value.id});o.status==200?(o.data,_.loading.hide(),_.notify({message:"Impresion correcta",icon:"done",color:"positive",position:"top"})):(console.error(o),alert(`Error ${o.status}: ${o.data}`))},ve=async a=>{_.loading.show({message:"..."}),console.log(a);const o=await R.printForSupply({ip:a.ip,port:a._port,order:s.value.id});console.log(o),o.status==200?(o.data,_.loading.hide(),_.notify({message:"Impresion correcta",icon:"done",color:"positive",position:"top"})):(console.error(o),alert(`Error ${o.status}: ${o.data}`))};return _e(()=>C.value=l.value.columns.map(a=>a.name)),E(),(a,o)=>(u(),I(A,null,[e(z,{class:"full-width"},{default:t(()=>[e(Q,{class:"row justify-between"},{default:t(()=>[n("div",null,[Be,n("div",Ye,c(s.value.from.alias),1)]),n("div",Me,[Oe,n("div",ze,c(s.value.id),1)]),n("div",Ne,[Te,n("div",Fe,c(s.value.created_by.nick),1)])]),_:1}),e(B),m.value?(u(),x(Q,{key:0,class:"text-center"},{default:t(()=>[e(De,{size:"50px",color:"purple"})]),_:1})):(u(),I(A,{key:1},[e(Q,{horizontal:"",class:"row"},{default:t(()=>[e(Q,{class:"col"},{default:t(()=>[n("div",null,c(d.value.name),1),n("div",Ge,c(P(L)(P(p).updated_at).format("YYYY-MM-DD hh:mm A")),1),s.value.notes?(u(),I("div",Ke,[e(Y,{name:"info",color:"pink-5",size:"20px"}),$(c(s.value.notes),1)])):D("",!0)]),_:1}),d.value&&d.value.id>6?(u(),x(Q,{key:0},{default:t(()=>[He,n("div",Je,c(s.value.invoice),1)]),_:1})):D("",!0),d.value&&d.value.id>9?(u(),x(Q,{key:1},{default:t(()=>[We,n("div",Xe,c(s.value.invoice),1)]),_:1})):D("",!0),d.value&&d.value.id>1?(u(),x(J,{key:2,class:"col",align:"right"},{default:t(()=>[d.value&&d.value.id>6?(u(),x(k,{key:0,color:"pink-6",icon:"qr_code",dense:"",onClick:ue})):D("",!0),d.value&&d.value.id>2?(u(),x(k,{key:1,color:"indigo-10",icon:"print",dense:""},{default:t(()=>[e(F,{class:"bg-grey-1 text-indigo-10",style:{"min-width":"250px"}},{default:t(()=>[e(oe,{onSelected:ve})]),_:1})]),_:1})):D("",!0),d.value&&d.value.id==2?(u(),x(k,{key:2,color:"positive",icon:"start",dense:"",label:"Iniciar Surtido",onClick:re})):D("",!0),d.value&&d.value.id==6?(u(),x(k,{key:3,color:"pink",icon:"start",dense:"",label:"Emitir Salida",onClick:o[0]||(o[0]=r=>h.value.state=!0)})):D("",!0)]),_:1})):D("",!0)]),_:1}),e(B),e(Qe,{modelValue:b.value,"onUpdate:modelValue":o[1]||(o[1]=r=>b.value=r),class:"text-pink-5",dense:"","no-caps":""},{default:t(()=>[e(te,{name:"log",label:"Log"}),e(te,{name:"basket",label:"Productos"})]),_:1},8,["modelValue"]),e(Ie,{modelValue:b.value,"onUpdate:modelValue":o[4]||(o[4]=r=>b.value=r),animated:""},{default:t(()=>[e(le,{name:"log"},{default:t(()=>[e(ae,null,{default:t(()=>[(u(!0),I(A,null,G(g.value,r=>(u(),x(H,{key:r.id},{default:t(()=>[e(U,{avatar:""},{default:t(()=>[$(c(r.id),1)]),_:2},1024),e(U,null,{default:t(()=>[$(c(r.name),1)]),_:2},1024),e(U,null,{default:t(()=>[$(c(r.pivot.details.responsable),1)]),_:2},1024),e(U,null,{default:t(()=>[$("de "+c(P(L)(r.pivot.created_at).format("h:mm a"))+" a "+c(P(L)(r.pivot.updated_at).format("h:mm a")),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(le,{name:"basket"},{default:t(()=>[y.value.length?(u(),x(X,{key:0,"row-key":"id",flat:"",rows:y.value,columns:l.value.columns,pagination:l.value.pagination,filter:l.value.filter,"visible-columns":C.value},{top:t(()=>[n("div",Ze,[n("div",ea,[n("span",aa,[e(k,{color:"pink-5",icon:"sync",onClick:E,round:"",dense:"",flat:""}),$(" Productos: "+c(y.value.length),1)]),$(", "),n("span",ta,"Piezas: "+c(P(i)),1)]),e(Z,{dense:"",modelValue:l.value.filter,"onUpdate:modelValue":o[2]||(o[2]=r=>l.value.filter=r),placeholder:"Buscar","input-class":"text-uppercase",color:"pink-5"},{append:t(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"]),e(k,{color:"secondary",icon:"fas fa-eye","no-caps":""},{default:t(()=>[e(F,{style:{"min-width":"200px"}},{default:t(()=>[e(ae,null,{default:t(()=>[(u(!0),I(A,null,G(l.value.columns,(r,me)=>N((u(),x(H,{tag:"label",key:me},{default:t(()=>[e(U,null,{default:t(()=>[e(T,null,{default:t(()=>[$(c(r.label),1)]),_:2},1024),e(T,{caption:""},{default:t(()=>[$(c(r.coldesc),1)]),_:2},1024)]),_:2},1024),e(U,{side:"",top:""},{default:t(()=>[e(ke,{color:"pink-5",modelValue:C.value,"onUpdate:modelValue":o[3]||(o[3]=fe=>C.value=fe),val:r.name},null,8,["modelValue","val"])]),_:2},1024)]),_:2},1024)),[[se]])),128))]),_:1})]),_:1})]),_:1})])]),_:1},8,["rows","columns","pagination","filter","visible-columns"])):(u(),I("div",la,"Nada por aqui"))]),_:1})]),_:1},8,["modelValue"])],64))]),_:1}),e(M,{modelValue:f.value.state,"onUpdate:modelValue":o[5]||(o[5]=r=>f.value.state=r)},{default:t(()=>[e(z,null,{default:t(()=>[e(Q,{class:"text-h6 text-center"},{default:t(()=>[$(c(s.value.id)+" - "+c(s.value.from.alias),1)]),_:1}),e(B),e(Q,{class:"text-center"},{default:t(()=>[oa,n("div",sa,c(f.value.key),1)]),_:1}),e(B),e(Q,{align:"center"},{default:t(()=>[e(k,{color:"indigo-10",icon:"print"},{default:t(()=>[e(F,null,{default:t(()=>[e(oe,{onSelected:pe})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(M,{modelValue:h.value.state,"onUpdate:modelValue":o[6]||(o[6]=r=>h.value.state=r)},{default:t(()=>[e(z,null,{default:t(()=>[e(Q,{class:"row items-start"},{default:t(()=>[e(ne,{icon:"warning",color:"orange-14","text-color":"white"}),na]),_:1}),e(J,{align:"right"},{default:t(()=>[N(e(k,{flat:"",label:"Cancelar",color:"primary","no-caps":""},null,512),[[de]]),e(k,{flat:"",label:"Continuar",color:"primary",onClick:ce,"no-caps":""})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},da={class:"text-h6"},ra={class:"row q-mt-md"},ca={class:"q-ml-sm text-h6"},ua={__name:"TableReport",props:{rows:{type:Array,default:[]},name:{type:String,default:""},type:{type:String,default:""}},emits:["cardResumeActived"],setup(j,{emit:S}){const w=j;ee();const _=O(),s=v({state:!1,action:null}),m=v({columns:[{name:"ID",field:"ID",label:"ID",align:"center"},{name:"code",field:"CODIGO",label:"Codigo",align:"center",sortable:!0},{name:"desc",field:"DESCRIPCION",label:"Descripcion",align:"left"},{name:"stockcedis",field:"CEDIS",label:"Stock (CEDIS)",align:"center",sortable:!0},{name:"stockpan",field:"PANTACO",label:"Stock (PAN)",align:"center",sortable:!0}],filter:""}),g={pndcs:{l:"Habilitar todo",c:"indigo-13",desc:"Los productos en esta lista se habilitaran y podran ser solicitados por cuaqluier tienda."},pdss:{l:"Deshabilitar todo",c:"pink-13",desc:"Los productos en esta lista se deshabilitaran y no podran ser solicitados."}},b=v(w.rows),d=v(w.name),y=v(w.type),V=q(()=>y.value?g[y.value]:{l:"",c:""}),h=()=>{const l=g[y.value];s.value.action=l,s.value.state=!0},f=async()=>{_.loading.show({message:"Espera..."});const l=await R.massiveAction({action:y.value});console.log(l),l.status==200?(l.data,s.value.state=!1,s.value.action=null,_.loading.hide(),_.notify({position:"center",color:"positive",icon:"done"}),S("cardResumeActived")):(console.error(l.data),alert(`Error ${l.status}: ${l.data.msg}`))},C=(l,i,p)=>{console.log(l),console.log(i),console.log(p),console.log(y.value)};return(l,i)=>(u(),I(A,null,[e(X,{"row-key":"ID",rows:b.value,columns:m.value.columns,filter:m.value.filter,onRowClick:C},{top:t(()=>[n("div",da,c(d.value),1),n("div",ra,[e(k,{color:P(V).c,icon:"warning",label:P(V).l,onClick:h},null,8,["color","label"]),e(Z,{modelValue:m.value.filter,"onUpdate:modelValue":i[0]||(i[0]=p=>m.value.filter=p),dense:"",type:"text",icon:"search",label:"Buscar"},{prepend:t(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},8,["rows","columns","filter"]),e(M,{modelValue:s.value.state,"onUpdate:modelValue":i[1]||(i[1]=p=>s.value.state=p),persistent:""},{default:t(()=>[e(z,null,{default:t(()=>[e(Q,{class:"row items-center"},{default:t(()=>[e(ne,{icon:"warning",color:s.value.action.c,"text-color":"white"},null,8,["color"]),n("span",ca,c(s.value.action.l),1)]),_:1}),e(Q,null,{default:t(()=>[$(c(s.value.action.desc),1)]),_:1}),e(J,{align:"right"},{default:t(()=>[N(e(k,{flat:"",label:"cancelar",color:"primary"},null,512),[[de]]),e(k,{flat:"",label:"continuar",color:"primary",onClick:f})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},pa={class:"row q-mb-md items-start justify-around"},va={class:"text-left"},ma={class:"text-h5"},fa={class:"text--2"},ga={class:"full-width row items-center"},_a={class:"col text-h6 text-dark"},ba={__name:"AdminDashboard",emits:["reloadDashboard"],setup(j,{emit:S}){W(),ie();const w=ee(),_=O(),s=["text-grey-5 text-bold","text-bold text-h6 text-red","text-indigo","4","5","text-bold text-pink-7","text-orange-8","8","text-primary","text-positive"],m=v({columns:[{name:"id",label:"Folio",field:"id",align:"center",sortable:!0},{name:"state",label:"Estado",field:l=>l.log.length==1?l.log[0].name:l.log[l.log.length-1].name,align:"left",sortable:!0,sort:(l,i,p,E)=>parseInt(p._status)-parseInt(E._status),classes:l=>s[l._status-1]},{name:"laststate",label:"Ultima actividad",field:l=>L(l.log.find(i=>i.id==l.status.id).pivot.updated_at).format("YYYY-MM-DD hh:mm A"),align:"left"},{name:"from",label:"Sucursal",field:l=>l.from.name.toUpperCase(),align:"left",sortable:!0},{name:"notes",label:"Notas",field:l=>l.notes,align:"left",classes:l=>l.notes?"text-orange text-bold":""},{name:"tmodels",label:"Modelos",field:l=>l.products_count,align:"center",sortable:!0},{name:"invoice",label:"Salida",field:l=>{var i;return(i=l.invoice)!=null?i:null},align:"center",classes:"text-bold"},{name:"entry",label:"Entrada",field:l=>{var i;return(i=l.invoice_received)!=null?i:null},align:"center",classes:"text-bold"}],filter:"",pagination:{sortBy:"desc",descending:!1,rowsPerPage:20}}),g=v({state:!1,title:"",data:null,name:null,type:null}),b=v({state:!1,head:null,block:!0}),d=q(()=>w.ordersSize),y=q(()=>w.ordersdb),V=q(()=>w.resume),h=async(l,i,p)=>{b.value.head=i,b.value.state=!0},f=async l=>{_.loading.show({message:"cargando..."+l});const i=await R.report(l);console.log(i.data),g.value.data=i.data.rows,g.value.name=i.data.name,g.value.type=l,g.value.state=!0,_.loading.hide()},C=()=>{g.value.state=!1,g.state=!1,S("reload")};return(l,i)=>(u(),x(he,{padding:"",class:"bg-grey-2"},{default:t(()=>[n("div",pa,[(u(!0),I(A,null,G(P(V),p=>(u(),x(k,{stack:"","no-caps":"",class:"q-py-md",key:p.key,onClick:E=>f(p.key),color:p.total==0?"teal-10":"pink-13",disabled:p.total==0},{default:t(()=>[n("div",va,[n("div",ma,c(p.total),1),n("div",fa,c(p.name),1)])]),_:2},1032,["onClick","color","disabled"]))),128))]),e(X,{flat:"",bordered:"","row-key":"id",rows:P(y),columns:m.value.columns,filter:m.value.filter,pagination:m.value.pagination,onRowClick:h},{top:t(()=>[n("div",ga,[n("div",_a,"Pedidos: "+c(P(d)),1),e(Z,{dense:"",modelValue:m.value.filter,"onUpdate:modelValue":i[0]||(i[0]=p=>m.value.filter=p),"input-class":"text-uppercase",placeholder:"Buscar",color:"pink-5"},{append:t(()=>[e(Y,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},8,["rows","columns","filter","pagination"]),e(M,{"full-width":"",modelValue:b.value.state,"onUpdate:modelValue":i[3]||(i[3]=p=>b.value.state=p),persistent:b.value.block,"no-esc-dismiss":b.value.block,"no-backdrop-dismiss":b.value.block},{default:t(()=>[e(ia,{head:b.value.head,onLoaded:i[1]||(i[1]=p=>b.value.block=!1),onLoading:i[2]||(i[2]=p=>b.value.block=!0)},null,8,["head"])]),_:1},8,["modelValue","persistent","no-esc-dismiss","no-backdrop-dismiss"]),e(M,{modelValue:g.value.state,"onUpdate:modelValue":i[4]||(i[4]=p=>g.value.state=p)},{default:t(()=>[e(ua,{rows:g.value.data,name:g.value.name,type:g.value.type,onCardResumeActived:C},null,8,["rows","name","type"])]),_:1},8,["modelValue"])]),_:1}))}};const ya=n("div",{class:"text-bold"},"Dashboard ",-1),ka={class:"row"},ha={class:"col row"},Da={__name:"DashboardLyt",setup(j){const S=W(),w=ie(),_=ee(),s=O(),m=v([{id:0,alias:"Todas"},{id:1,alias:"CEDIS",_state:1},{id:2,alias:"SP1",_state:1}]),g=v([{id:"day",label:"Hoy"},{id:"week",label:"Semana"},{id:"month",label:"Mes"},{id:"C",label:"otra ...",disable:!0}]),b=v(null),d=v(null),y=v({from:L(Date.now()).startOf("day"),to:L(Date.now()).startOf("day")}),V=async()=>{var p;s.loading.show({message:"Cargado vista..."}),console.log("%cIniciando MainLayout...","font-size:2em;color:orange;");let f=(p=S.query.v)!=null?p:"day",C=g.value.findIndex(E=>E.id==f),l=C>=0?C:0;d.value=g.value[l],y.value.from=L(Date.now()).startOf(d.value.id);const i=await R.index(d.value.id);console.log(i),_.fillOrders(i.orders),_.fillResume(i.resume),_.fillPrinters(i.printers),b.value=m.value[0],console.log("%cMainLayout listo!!","font-size:2em;color:orange;"),s.loading.hide()},h=f=>w.push(`/dashboard?v=${f.id}`);return q(()=>y.value.from.format("YYYY/MM/DD")),q(()=>y.value.to.format("YYYY/MM/DD")),ye(()=>S.query,()=>{V()}),V(),document.title="Dashboard",(f,C)=>(u(),x(xe,{view:"lHh Lpr lFf"},{default:t(()=>[e(Ce,{bordered:"",class:"transparent text-dark"},{default:t(()=>[e(we,{class:"row justify-between items-center"},{default:t(()=>[ya,n("div",ka,[e(k,{color:"pink-5",round:"",unelevated:"",flat:"",icon:"sync",onClick:V}),n("div",ha,[e(K,{class:"col",dense:"",filled:"",label:"Vista",modelValue:d.value,"onUpdate:modelValue":[C[0]||(C[0]=l=>d.value=l),h],options:g.value},null,8,["modelValue","options"]),d.value.id=="C"?(u(),x(k,{key:0,unelevated:"",color:"pink-5",icon:"fas fa-calendar-day",dense:""})):D("",!0)])])]),_:1})]),_:1}),e(Se,null,{default:t(()=>[e(ba,{onReload:V})]),_:1})]),_:1}))}};export{Da as default};
